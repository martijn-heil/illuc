<div class="app-shell">
  <main class="content">
    <app-workflow-sidebar
      [workflows]="workflows()"
      [selectedWorkflowId]="workflowStore.selectedWorkflowId()"
      [baseRepo]="baseRepo()"
      (browseRepo)="browseForRepo()"
      (createWorkflow)="openCreateWorkflowModal()"
      (selectWorkflow)="selectWorkflow($event)"
      (startWorkflow)="startWorkflow($event)"
      (stopWorkflow)="stopWorkflow($event)"
      (discardWorkflow)="discardWorkflow($event)"
    ></app-workflow-sidebar>

    <app-workflow-view
      class="workflow-view"
      [workflow]="selectedWorkflow()"
      (startWorkflow)="startWorkflow($event)"
      (stopWorkflow)="stopWorkflow($event)"
      (discardWorkflow)="discardWorkflow($event)"
      (openInVsCode)="openWorkflowInVsCode($event)"
      (openTerminal)="openWorkflowTerminal($event)"
    ></app-workflow-view>
  </main>

  <footer class="status-bar" *ngIf="statusMessage">
    {{ statusMessage }}
  </footer>

  <div class="modal-backdrop" *ngIf="showCreateModal">
    <div class="modal">
      <h3>Create Workflow</h3>
      <p class="modal-subtitle">Provide the Git branch name for this workflow.</p>
      <label class="input-label">Branch name</label>
      <input
        type="text"
        [(ngModel)]="branchNameInput"
        placeholder="e.g. feature/25323-fancy-feature-name"
      />
      <div class="error" *ngIf="branchNameError">{{ branchNameError }}</div>
      <div class="modal-actions">
        <button type="button" class="ghost" (click)="closeCreateWorkflowModal()">Cancel</button>
        <button type="button" class="primary" (click)="submitNewWorkflow()">Create Workflow</button>
      </div>
    </div>
  </div>
</div>
